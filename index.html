<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Karakter Hikayen</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:'Segoe UI',sans-serif;color:#fff;overflow-x:hidden;background:linear-gradient(-45deg,#0f2027,#203a43,#2c5364,#1c1c1c);background-size:400% 400%;animation:bgMove 20s ease infinite;}
@keyframes bgMove{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.container{max-width:430px;margin:auto;padding:20px}
.card{background:rgba(0,0,0,.6);padding:22px;border-radius:22px;box-shadow:0 0 25px rgba(0,0,0,.6);animation:fadeIn .8s ease;margin-bottom:20px}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
h1{text-align:center;margin-top:0}
select,input,button{width:100%;padding:12px;margin-top:12px;border-radius:12px;border:none;font-size:16px}
button{background:#ff9800;color:#000;font-weight:bold;cursor:pointer;transition:all .3s}
button:hover{opacity:.9;transform:scale(1.05);}
.selection{margin-bottom:15px;padding:12px;background:rgba(255,255,255,0.1);border-radius:12px;font-weight:bold}
.story{font-size:16px;line-height:1.7;animation:type 1.2s ease}
@keyframes type{from{opacity:0}to{opacity:1}}
.magic{margin-top:25px;text-align:center;user-select:none;}
.magic-box{width:120px;height:120px;margin:auto;border-radius:20px;background:linear-gradient(135deg,#ff9800,#ff5722);box-shadow:0 0 25px #ff9800;display:flex;align-items:center;justify-content:center;font-size:48px;transition:all .4s;}
.magic-box.active{transform:rotate(0deg) scale(1);}
.magic-content{display:none;margin-top:15px;animation:fadeInContent .6s ease forwards;}
@keyframes fadeInContent{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:scale(1)}}
.magic-text{margin-top:10px;font-size:14px;opacity:.9;text-align:center;transition:all .3s;}
.tags{margin-top:15px;font-size:13px;opacity:.8;text-align:center;}
.flags img{width:40px;height:25px;margin:0 5px;cursor:pointer;border-radius:5px;border:2px solid #fff;}
.flags img.selected{border:2px solid yellow;}
.share-buttons{display:flex;justify-content:center;margin-top:15px;}
.share-buttons button{margin:0 5px;padding:10px 12px;font-size:14px;border-radius:8px;cursor:pointer;background:#1db954;color:#fff;border:none;}
.share-buttons button:hover{opacity:.85;transform:scale(1.05);}
</style>
</head>
<body>
<div class="container">

<!-- Step 1: Dil Se√ßimi -->
<div class="card" id="step1">
<h1 id="welcomeText">Ho≈ü geldin, hikayeni bulmak √ßok g√ºzel!</h1>
<div class="flags">
<img src="https://flagcdn.com/tr.svg" alt="TR" onclick="setLang('tr', this)" class="selected">
<img src="https://flagcdn.com/az.svg" alt="AZ" onclick="setLang('az', this)">
<img src="https://flagcdn.com/us.svg" alt="EN" onclick="setLang('en', this)">
</div>
<button onclick="start()">ƒ∞leri</button>
</div>

<!-- Step 2: Anket -->
<div class="card" id="step2" style="display:none">
<h1 id="surveyTitle">Anket</h1>
<input id="name" placeholder="Adƒ±n">
<div class="selection">
<p>Nasƒ±l birisiniz: <span id="livePower">[se√ßim g√∂zl…ôyir]</span></p>
<p>Ne'den korkuyorsunuz: <span id="liveFear">[se√ßim g√∂zl…ôyir]</span></p>
</div>
<select id="power" onchange="updateLive('power')"></select>
<select id="fear" onchange="updateLive('fear')"></select>
<button onclick="generate()" id="generateBtn">Hikayeni G√∂r</button>
</div>

<!-- Step 3: Hekaye -->
<div class="card" id="result" style="display:none">
<div class="story" id="storyText"></div>

<div class="magic">
<div class="magic-box" id="magicBox">üîÆ</div>
<p class="magic-text" id="magicText">Kutu 3 kez tƒ±kla a√ß!</p>
</div>

<div class="magic-content" id="magicContent">
<button onclick="playMusic()">üéµ M√ºziƒüi Ba≈ülat</button>
<p>üê∫ Ruh Heyvanƒ±n: <span id="animal"></span></p>
<p>üí° Tavsiye: <span id="advice"></span></p>
<div class="share-buttons">
<button onclick="share('whatsapp')">WhatsApp</button>
<button onclick="share('instagram')">Instagram</button>
<button onclick="share('tiktok')">TikTok</button>
</div>
</div>

<div class="tags" id="tags"></div>
</div>

</div>

<audio id="music" loop></audio>

<script>
let lang="tr"; 
let clicks=0;

// √áoklu melodiler
const melodies={
tr:["https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3","https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3","https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"],
az:["https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3","https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3","https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3"],
en:["https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3","https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3","https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3"]
};

// Ruh heyvanlarƒ±
const animals={
tr:["Qurd","Aslan","≈ûahin","Ayƒ±","Panter"],
az:["Qurd","Aslan","≈ûahin","Ayƒ±","Panter"],
en:["Wolf","Lion","Eagle","Bear","Panther"]
};

// Tavsiyeler
const advices={
tr:["Yoluna inan ve devam et.","Kendine g√ºven, her ≈üey m√ºmk√ºn.","Zorluklar seni g√º√ßlendirir.","Sabƒ±rlƒ± ol ve pes etme.","Hayat kƒ±sa, fƒ±rsatlarƒ± ka√ßƒ±rma."],
az:["Yoluna inan v…ô davam et.","√ñz√ºn…ô g√ºv…ôn, h…ôr ≈üey m√ºmk√ºnd√ºr.","√á…ôtinlikl…ôr s…ôni g√ºcl…ôndirir.","S…ôbirli ol v…ô vaz ke√ßm…ô.","H…ôyat qƒ±sadƒ±r, f√ºrs…ôtl…ôri qa√ßƒ±rma."],
en:["Believe in your path and continue.","Trust yourself, everything is possible.","Challenges make you stronger.","Be patient and never give up.","Life is short, don't miss opportunities."]
};

// Hekaye template
const stories={
tr:["{name}, sen {power} ruhlu bir insansƒ±n. Hayatƒ±nda {fear} seni sƒ±nasa da, i√ßindeki g√º√ß hep seni ayaƒüa kaldƒ±rƒ±r. Bu yol kolay deƒüil, ama sen bunu se√ßenlerden birisin."],
az:["{name}, s…ôn {power} ruhlu bir insansan. H…ôyatƒ±nda {fear} s…ôni sƒ±nasa da, i√ßind…ôki g√ºc h…ômi≈ü…ô s…ôni ayaqda saxlayƒ±r. Bu yol asan deyil, amma s…ôn bunu se√ß…ônl…ôrd…ôns…ôn."],
en:["{name}, you are a {power} spirited person. In life, {fear} challenges you, but your inner strength always keeps you standing. This path is not easy, but you are one of the few who choose it."]
};

// Se√ßenekler her dil i√ßin
const powerOptions={
tr:["Lider","Sabƒ±rlƒ±","Cesur","Akƒ±llƒ±"],
az:["Lider","S…ôbirli","C…ôsur","Aƒüƒ±llƒ±"],
en:["Leader","Patient","Brave","Smart"]
};
const fearOptions={
tr:["Karanlƒ±k","Yalnƒ±z kalmak","Kaybetmek","Bilinmeyen"],
az:["Qaranlƒ±q","T…ôk qalmaq","ƒ∞tirm…ôk","Nam…ôlumluq"],
en:["Darkness","Being alone","Losing","Unknown"]
};

function setLang(l,el){
lang=l;
document.querySelectorAll(".flags img").forEach(i=>i.classList.remove("selected"));
el.classList.add("selected");

const welcomeText=document.getElementById("welcomeText");
const surveyTitle=document.getElementById("surveyTitle");
const nameInput=document.getElementById("name");
const generateBtn=document.getElementById("generateBtn");

if(lang==='tr'){
welcomeText.innerText="Ho≈ü geldin, hikayeni bulmak √ßok g√ºzel!";
surveyTitle.innerText="Anket";
nameInput.placeholder="Adƒ±n";
generateBtn.innerText="Hikayeni G√∂r";
}else if(lang==='az'){
welcomeText.innerText="Xo≈ü g…ôldin, hekay…ôni tapmaq √ßox g√∂z…ôl!";
surveyTitle.innerText="Anket";
nameInput.placeholder="Adƒ±n";
generateBtn.innerText="Hekay…ôni G√∂r";
}else{
welcomeText.innerText="Welcome, finding your story is great!";
surveyTitle.innerText="Survey";
nameInput.placeholder="Your Name";
generateBtn.innerText="See Your Story";
}

// Anket se√ßeneklerini doldur
const powerSelect=document.getElementById("power");
const fearSelect=document.getElementById("fear");
powerSelect.innerHTML="<option value=''>Se√ß</option>";
fearSelect.innerHTML="<option value=''>Se√ß</option>";
powerOptions[lang].forEach(opt=>{powerSelect.innerHTML+=`<option>${opt}</option>`;});
fearOptions[lang].forEach(opt=>{fearSelect.innerHTML+=`<option>${opt}</option>`;});
}

function start(){
document.getElementById("step1").style.display="none";
document.getElementById("step2").style.display="block";
}

function updateLive(type){
if(type==='power') document.getElementById("livePower").innerText=document.getElementById("power").value||"[se√ßim g√∂zl…ôyir]";
if(type==='fear') document.getElementById("liveFear").innerText=document.getElementById("fear").value||"[se√ßim g√∂zl…ôyir]";
}

function generate(){
let name=document.getElementById("name").value||"S…ôn";
let power=document.getElementById("power").value||"Se√ßilm…ôyib";
let fear=document.getElementById("fear").value||"Se√ßilm…ôyib";
let template=stories[lang][0];
let story=template.replace(/{name}/g,name).replace(/{power}/g,power).replace(/{fear}/g,fear);

document.getElementById("step2").style.display="none";
document.getElementById("result").style.display="block";
document.getElementById("storyText").innerText=story;
document.getElementById("tags").innerText="#karakter #story #motivasyon";

// Random animal ve advice
document.getElementById("animal").innerText=animals[lang][Math.floor(Math.random()*animals[lang].length)];
document.getElementById("advice").innerText=advices[lang][Math.floor(Math.random()*advices[lang].length)];

// Random melody
const music=document.getElementById("music");
const melList=melodies[lang];
music.src=melList[Math.floor(Math.random()*melList.length)];
}

const magicBox=document.getElementById("magicBox");
magicBox.addEventListener("click",function(){
clicks++;
magicBox.style.transform=`rotate(${clicks*120}deg) scale(1.1)`;
setTimeout(()=>{magicBox.style.transform=`rotate(${clicks*120}deg) scale(1)`;},200);
const magicText=document.getElementById("magicText");
if(clicks>=3){
document.getElementById("magicContent").style.display="block";
magicText.innerText="üéµ M√ºziƒüi Ba≈ülat ve dinle!";
}else{
magicText.innerText=`Kutu a√ßmak i√ßin ${3-clicks} klik kaldƒ±!`;
}
});

function playMusic(){
const music=document.getElementById("music");
music.play().catch(err=>{
alert("Telefonunuz s…ôsi a√ßmaƒüa icaz…ô vermir. D√ºym…ôy…ô basƒ±n v…ô s…ôsi a√ßƒ±n.");
});
}

// Payla≈üƒ±m
function share(platform){
const storyText=document.getElementById("storyText").innerText;
let url="";
if(platform==="whatsapp") url=`https://wa.me/?text=${encodeURIComponent(storyText)}`;
if(platform==="instagram") url=`https://www.instagram.com/`;
if(platform==="tiktok") url=`https://www.tiktok.com/upload?lang=${lang}`;
window.open(url,"_blank");
}

// Ba≈ülangƒ±√ßta T√ºrk√ße ayarla
setLang('tr',document.querySelector(".flags img.selected"));
</script>
</body>
</html>
